import{r as t,j as w}from"./ui-C_rQOgPK.js";import{a as L}from"./index-DwWsHBqf.js";import{p as S}from"./utils-D89tvFug.js";const m=768;function T(){const[o,n]=t.useState(void 0);return t.useEffect(()=>{const e=window.matchMedia(`(max-width: ${m-1}px)`),s=()=>{n(window.innerWidth<m)};return e.addEventListener("change",s),n(window.innerWidth<m),()=>e.removeEventListener("change",s)},[]),!!o}const I=()=>{const[o,n]=t.useState(!1),e=T();t.useEffect(()=>{const i=()=>{window.pageYOffset>300?n(!0):n(!1)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]);const s=()=>{window.scrollTo({top:0,behavior:"smooth"})};return!e||!o?null:w.jsx(L,{onClick:s,className:"fixed bottom-6 right-6 z-50 h-12 w-12 rounded-full bg-primary hover:bg-primary/90 shadow-lg transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",size:"icon","aria-label":"Scroll to top",children:w.jsx(S,{className:"h-6 w-6 text-primary-foreground"})})},Y=({onRefresh:o,threshold:n=80,disabled:e=!1})=>{const[s,i]=t.useState(!1),[a,h]=t.useState(0),[d,g]=t.useState(0),[c,v]=t.useState(!1),u=t.useCallback(r=>{e||s||window.scrollY>10||(g(r.touches[0].clientY),v(!0))},[e,s]),l=t.useCallback(r=>{if(!c||e||s)return;const E=r.touches[0].clientY,p=Math.max(0,E-d),x=Math.min(p*.5,n*2);h(x),p>0&&r.preventDefault()},[c,d,n,e,s]),f=t.useCallback(async()=>{if(!(!c||e)){if(v(!1),a>=n){i(!0);try{await o()}catch(r){console.error("Pull to refresh failed:",r)}finally{i(!1)}}h(0)}},[c,a,n,o,e]);return t.useEffect(()=>{if(!e)return document.addEventListener("touchstart",u,{passive:!1}),document.addEventListener("touchmove",l,{passive:!1}),document.addEventListener("touchend",f),()=>{document.removeEventListener("touchstart",u),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",f)}},[u,l,f,e]),{isRefreshing:s,pullDistance:a,isPulling:c}};export{I as S,Y as u};
